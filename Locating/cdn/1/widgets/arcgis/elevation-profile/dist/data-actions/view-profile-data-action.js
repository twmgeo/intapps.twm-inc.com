System.register(["jimu-core"],(function(t,e){var o={};return{setters:[function(t){o.AbstractDataAction=t.AbstractDataAction,o.DataLevel=t.DataLevel,o.DataSourceStatus=t.DataSourceStatus,o.MutableStoreManager=t.MutableStoreManager,o.getAppStore=t.getAppStore}],execute:function(){t((()=>{"use strict";var t={48891:t=>{t.exports=o}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return(()=>{n.r(r),n.d(r,{default:()=>o});var t=n(48891),e=function(t,e,o,n){return new(o||(o=Promise))((function(r,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function l(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(a,l)}u((n=n.apply(t,e||[])).next())}))};class o extends t.AbstractDataAction{isSupported(o,n){var r,i,a,l,u,d,c;return e(this,void 0,void 0,(function*(){if(o.length>1)return!1;const e=o[0],s=e.dataSource,v=function(){var e,o,n;return window.jimuConfig.isBuilder?null===(o=null===(e=(0,t.getAppStore)().getState())||void 0===e?void 0:e.appStateInBuilder)||void 0===o?void 0:o.appConfig:null===(n=(0,t.getAppStore)().getState())||void 0===n?void 0:n.appConfig}(),p=null===(r=null==v?void 0:v.widgets)||void 0===r?void 0:r[this.widgetId],f=null===(a=null===(i=p.config)||void 0===i?void 0:i.configInfo)||void 0===a?void 0:a[null===(l=null==p?void 0:p.config)||void 0===l?void 0:l.activeDataSource],g=(null==f?void 0:f.hasOwnProperty("advanceOptions"))?null==f?void 0:f.advanceOptions:null===(u=null==f?void 0:f.profileSettings)||void 0===u?void 0:u.isProfileSettingsEnabled;return!!g&&((!g||!(null===(d=null==f?void 0:f.profileSettings)||void 0===d?void 0:d.isCustomizeOptionEnabled)||0!==(null===(c=null==f?void 0:f.profileSettings)||void 0===c?void 0:c.layers.length))&&(!(!s||s.getStatus()===t.DataSourceStatus.NotReady)&&(!(!(null==s?void 0:s.supportSpatialInfo)||!(null==s?void 0:s.supportSpatialInfo()))&&n===t.DataLevel.Records&&("WEB_MAP"===s.type||"WEB_SCENE"===s.type||"FEATURE_LAYER"===s.type&&"esriGeometryPolyline"===s.getGeometryType())&&e.records.length>0&&n===t.DataLevel.Records&&("current"===e.type||"selected"===e.type))))}))}onExecute(o){return e(this,void 0,void 0,(function*(){const{records:e}=o[0];return t.MutableStoreManager.getInstance().updateStateValue(this.widgetId,"selectedFeatureRecords",e),!0}))}}})(),r})())}}}));